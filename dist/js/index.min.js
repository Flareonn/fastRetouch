makeIntersect("#shareBlock","#socialLinks");let offers=[{imagePath:"./img/offers/1/thumb.jpg",title:"Free Retouch for Adobe Photoshop",features:["Stamp - for removing local skin irregularities","Auto - automatic skin texture and tone smoothing","FS - professional retouch of skin texture and tone","Skin - enhancement of skin texture","Anti Glare - tool for removing oily shines","Tan - easy and fast sun tan function"],slider:["./img/offers/1/thumb.jpg","./img/offers/1/slider-1.jpg","./img/offers/1/slider-2.jpg"],categories:["stamp layer","anti glare","tanned skin","auto retouch","skin retouch","frequency separation"],downloadLink:"https://exchange.adobe.com/creativecloud.details.106279.free-retouch-panel-for-adobe-photoshop.html",id:0},{imagePath:"./img/offers/2/thumb.jpg",title:"Pro Retouch Panel for Adobe Photoshop",features:["Gauss 2 - professional retouch of skin texture and tone","Gauss 3 - function using three-frequency separation","DBC - dodge & burn method with flexible settings using curves","DBO - dodge & burn method with flexible settings using overlays","Anti Glare - tool for removing oily shines","Skin - enhancement of skin texture"],slider:["./img/offers/2/thumb.jpg","./img/offers/2/slider-1.jpg","./img/offers/2/slider-2.jpg"],categories:["dodge&burn","skin retouch","anti glare","frequency separation"],downloadLink:"https://exchange.adobe.com/creativecloud.details.106407.retouch-pro.html",id:1},{imagePath:"./img/offers/5/thumb.jpg",title:"Beauty Retouch Panel for Adobe Photoshop",features:["FS - professional retouch of skin texture and tone","Auto - automatic skin texture and tone smoothing","Makeup - multitool that includes many functions for makeup","Skin - enhancement of skin texture","Anti Glare - tool for removing oily shines","Tan - easy and fast sun tan function"],slider:["./img/offers/5/thumb.jpg","./img/offers/5/slider-1.jpg","./img/offers/5/slider-2.jpg"],categories:["Makeup","Tanned Skin","Auto retouch","Anti Glare","Frequency separation","Skin retouch"],downloadLink:"https://exchange.adobe.com/creativecloud.details.106529.beauty-retouch.html",id:4}];class TemplateCard{constructor({imagePath:e,title:t,slider:n,features:a,downloadLink:o,id:i,categories:s}){this.imagePath=e,this.title=t,this.slider=n,this.features=a,this.downloadLink=o,this.id=i,this.categories=s,this._createElement()}_createElement(){const e=this.imagePath.slice(0,-4);this.elementHTML=`\n      <div class="catalog-card col-md-4 col-12 d-flex flex-column align-items-center" data-id=${this.id}>\n        <picture>\n          <source srcset="${e+"-m.webp"}" type="image/webp">\n          <img\n            src="${e+"-m.jpg"}"\n            alt="${this.title}"\n            class="catalog-card__image"\n          >\n        </picture>\n        <div class="catalog-card__group d-md-none d-flex justify-content-center">\n          <a\n            href="${this.downloadLink}"\n            target="_blank"\n            class="catalog-card__button"\n          >\n            Get now\n          </a>\n          <button class="catalog-card__button" onclick="popupEmail(event, '${this.downloadLink}', '${this.title}')">\n            By Email\n          </button>\n        </div>\n      </div>    \n    `}_createPopup(){this.title=this.title.split(/for/).join("<br/>For"),this.popup=`\n      <div class="catalog-popup" id="activePopup">\n        <div class="catalog-popup__wrapper d-flex container align-self-center">\n          <svg\n            width="32"\n            height="32"\n            viewBox="0 0 32 32"\n            fill="none"\n            xmlns="http://www.w3.org/2000/svg"\n            class="catalog-popup__back"\n          >\n            <path\n              d="M7.77734 23.334L23.3337 7.77764"\n              stroke="#222222"\n              stroke-linecap="square"\n            />\n            <path\n              d="M7.77734 7.7793L23.3337 23.3356"\n              stroke="#222222"\n              stroke-linecap="square"\n            />\n          </svg>\n          <div class="catalog-popup__slider">\n            <div\n              style="\n                --swiper-navigation-color: #2e464a;\n                --swiper-pagination-color: #2e464a;\n              "\n              class="swiper-container mySwiper"\n            >\n              <div class="swiper-wrapper">\n                ${this.slider.map(e=>`<div class="swiper-slide">\n                              <img src=${e} alt="${this.title.replace(/<\/?[a-zA-Z]+>/gi,"")}">\n                            </div>`).join("")}\n              </div>\n              <div class="swiper-button-next"></div>\n              <div class="swiper-button-prev"></div>\n            </div>\n          </div>\n          <div class="catalog-popup__content">\n            <h2 class="catalog-popup__title">${this.title}</h2>\n            <strong class="d-lg-inline d-md-none">Functions</strong>\n            <ul class="catalog-popup__list">\n            ${this.features.map(e=>`<li class="catalog-popup__list-item">● ${e}</li>`).join("")}\n            </ul>\n            <div class="catalog-popup__group">\n              <button class="catalog-popup__link catalog-popup__link_back">back</button>\n              <a href="${this.downloadLink}" target="_blank" class="catalog-popup__link">\n                download\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    `,catalog.innerHTML+=this.popup,this.swiper=new Swiper(".mySwiper",{spaceBetween:10,centeredSlides:!0,loop:!0,freeMode:!0,observer:!0,observeParents:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}openPopup(){this._createPopup(),document.querySelector("body").classList.add("lock"),activePopup.addEventListener("click",handlerPopup)}}function handlerPopup(e){(["catalog-popup","catalog-popup__back","catalog-form__submit back","catalog-popup__link catalog-popup__link_back"].includes(e.target.classList.value)||["rect","path"].includes(e.target.tagName))&&(activePopup.removeEventListener("click",this),catalog.removeChild(catalog.querySelector(".catalog-popup")),document.querySelector("body").classList.remove("lock"))}let cards=[];offers.forEach(e=>{e.categories=e.categories.map(e=>e.toLowerCase());let t=new TemplateCard(e);catalog.innerHTML+=t.elementHTML,cards.push(t)}),catalog.addEventListener("click",({target:e})=>{!e.closest(".catalog-card")||window.innerWidth<768||cards.find(t=>t.id===Number(e.closest(".catalog-card").dataset.id)).openPopup()});const popupEmail=(e,t,n)=>{catalog.innerHTML+=`\n      <div class="catalog-popup" id="activePopup">\n        <div class="catalog-popup__wrapper d-flex container align-self-center">\n          <svg\n            width="32"\n            height="32"\n            viewBox="0 0 32 32"\n            fill="none"\n            xmlns="http://www.w3.org/2000/svg"\n            class="catalog-popup__back"\n          >\n            <path\n              d="M7.77734 23.334L23.3337 7.77764"\n              stroke="#222222"\n              stroke-linecap="square"\n            />\n            <path\n              d="M7.77734 7.7793L23.3337 23.3356"\n              stroke="#222222"\n              stroke-linecap="square"\n            />\n          </svg>\n          <form class="catalog-form" action="" enctype="applicationjson" method="POST">\n            <input class="d-none" type="text" name="pluginName" value="${n}"/>\n            <input class="d-none" type="text" name="link" value="${t}"/>\n            <div class="catalog-form__wrapper">\n              <label class="catalog-form__label" for="name">\n                Your name\n              </label>\n              <input type="text" class="catalog-form__input" id="name" name="name"/>\n            </div>\n            <div class="catalog-form__wrapper">\n              <label class="catalog-form__label" for="email">\n                Your E-mail\n              </label>\n              <input type="email" class="catalog-form__input" id="email" name="email"/>\n            </div>\n            <input type="submit" value="Get" class="catalog-form__submit"/>\n          </form>\n        </div>\n      </div>\n  `,document.querySelector("body").classList.add("lock"),activePopup.addEventListener("click",handlerPopup),activePopup.querySelector(".catalog-form").addEventListener("submit",(function(e){send(e,"getLink.php"),e.preventDefault(),this.style.paddingTop="141px",this.innerHTML='\n      <span class="catalog-form__thanks">\n        Done! \n        <svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M13.5 0C6.0558 0 0 6.0558 0 13.5C0 20.9442 6.0558 27 13.5 27C20.9442 27 27 20.9442 27 13.5C27 6.0558 20.9442 0 13.5 0Z" fill="#2196F3"/>\n          <path d="M20.3426 11.6394L13.03 18.9518C12.8106 19.1712 12.5226 19.2816 12.2346 19.2816C11.9467 19.2816 11.6587 19.1712 11.4393 18.9518L7.78313 15.2956C7.34312 14.8558 7.34312 14.1447 7.78313 13.7049C8.22292 13.2649 8.93381 13.2649 9.37381 13.7049L12.2346 16.5658L18.7519 10.0488C19.1917 9.60875 19.9026 9.60875 20.3426 10.0488C20.7824 10.4885 20.7824 11.1994 20.3426 11.6394Z" fill="#FAFAFA"/>\n        </svg>\n      </span>\n      <button class="catalog-form__submit back">Ok</button>\n    '}))};function send(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1;var n=new XMLHttpRequest;n.open("POST",t,!0),n.onload=function(){n.status>=200&&n.status<400&&"success"!=this.response&&alert("Ошибка. Сообщение не отправлено")},n.onerror=function(){alert("Ошибка отправки запроса")},n.send(new FormData(e.target))}Array.from(document.querySelectorAll(".features-list__item")).forEach(e=>{e.addEventListener("click",(function(){this.classList.toggle("active");let e=this.querySelector("ul");e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px"}))}),window.addEventListener("resize",(function(){this.innerWidth<=768&&catalog.querySelector(".catalog-popup__slider")&&handlerPopup({target:{classList:{value:"catalog-popup"}}})})),window.addEventListener("keydown",({key:e})=>{catalog.querySelector("#activePopup")&&"Escape"===e&&handlerPopup({target:{classList:{value:"catalog-popup"}}})});